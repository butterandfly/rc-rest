<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>rc-rest Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="../rc-rest.html">
  </head>
  <body unresolved>

    <p>An example of <code>&lt;rc-rest&gt;</code>:</p>

    <rc-rest type="login">
    </rc-rest>

    <button id="send" type="button" name="button">Send Request!</button>

    <script>
      var apis = {
        login: {
          type: 'login',
          url: '/components/rc-rest/demo/login.json',
          method: 'GET',
          errors: {
            '401': '用户名或密码错误'
          }
        },
        host: null
      };

      window.RcRestSetting.restApis = apis;

      // TODO: middleware

      // TODO: compile url

      var restEl = document.querySelector('rc-rest');

      document.querySelector('#send').addEventListener('click', function() {
        restEl.do();
      });

      restEl.addEventListener('response', function() {
        alert(restEl.lastResponse);
      });
    </script>

  </body>
</html>
